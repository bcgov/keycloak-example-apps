<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./partials/head'); %>
  </head>
  <body class="container">
    <header><%- include('./partials/header'); %></header>

    <main>
      <div class="card">
        <div class="card-body">
          <form class="needs-validation" method="post" action="/login">
            <div class="form-group">
              <label for="signOnUrl" class="form-label">SSO Service URL</label>
              <input
                type="text"
                class="form-control"
                id="signOnUrl"
                name="signOnUrl"
                required
                value="<%- inputs?.signOnUrl %>"
              />
            </div>
            <div class="form-group">
              <label for="logoutUrl" class="form-label">Logout URL</label>
              <input
                type="text"
                class="form-control"
                id="logoutUrl"
                name="logoutUrl"
                required
                value="<%- inputs?.logoutUrl %>"
              />
            </div>
            <div class="form-group">
              <label for="entityId" class="form-label">Entity ID</label>
              <input
                type="text"
                class="form-control"
                id="entityId"
                name="entityId"
                required
                value="<%- inputs?.entityId %>"
              />
            </div>
            <div class="form-group">
              <label for="x509Cert" class="form-label">X.509 Certificate</label>
              <textarea id="x509Cert" cols="30" rows="10" class="form-control" name="x509Cert" required>
    <%- inputs?.x509Cert %></textarea
              >
            </div>
            <br />
            <div class="col-12">
              <button type="submit" class="btn btn-primary">Login</button>
              <% if(user){%><a role="button" class="btn btn-secondary" href="/logout">Logout</a><% } %>
            </div>
          </form>
        </div>
      </div>
      <br />
      <% if(user) { %> <% if(user?.attributes) { %>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">SAML Response</h5>

          <table class="table table-striped">
            <thead>
              <tr>
                <th>Attribute</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <% Object.keys(user.attributes).forEach(function(prop) { %>
              <tr>
                <td><%- prop %></td>
                <td><%- user.attributes[prop] %></td>
              </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
      </div>
      <% } %> <% } %>
    </main>
  </body>
</html>
