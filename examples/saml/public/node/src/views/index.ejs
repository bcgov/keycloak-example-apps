<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./partials/head'); %>
  </head>
  <body class="container">
    <header><%- include('./partials/header'); %></header>

    <main>
      <form class="needs-validation" method="post" action="/login">
        <div class="form-group">
          <label for="signOnUrl" class="form-label">SSO Service URL</label>
          <input
            type="text"
            class="form-control"
            id="signOnUrl"
            name="signOnUrl"
            required
            value="<%- inputs?.signOnUrl %>"
          />
        </div>
        <div class="form-group">
          <label for="logoutUrl" class="form-label">Logout URL</label>
          <input
            type="text"
            class="form-control"
            id="logoutUrl"
            name="logoutUrl"
            required
            value="<%- inputs?.logoutUrl %>"
          />
        </div>
        <div class="form-group">
          <label for="entityId" class="form-label">Entity ID</label>
          <input
            type="text"
            class="form-control"
            id="entityId"
            name="entityId"
            required
            value="<%- inputs?.entityId %>"
          />
        </div>
        <div class="form-group">
          <label for="x509Cert" class="form-label">X.509 Certificate</label>
          <textarea id="x509Cert" cols="30" rows="10" class="form-control" name="x509Cert" required>
<%- inputs?.x509Cert %></textarea
          >
        </div>
        <br />
        <div class="col-12">
          <button type="submit" class="btn btn-primary">Login</button>
          <% if(user){%><a role="button" class="btn btn-secondary" href="/logout">Logout</a><% } %>
          <button type="reset" class="btn btn-danger">Reset</button>
        </div>
      </form>
      <br />
      <br />
      <% if(user) { %>
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="home-tab"
            data-bs-toggle="tab"
            data-bs-target="#home-tab-pane"
            type="button"
            role="tab"
            aria-controls="home-tab-pane"
            aria-selected="true"
          >
            Assertions
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="profile-tab"
            data-bs-toggle="tab"
            data-bs-target="#profile-tab-pane"
            type="button"
            role="tab"
            aria-controls="profile-tab-pane"
            aria-selected="false"
          >
            Attributes
          </button>
        </li>
      </ul>
      <div class="tab-content">
        <div
          class="tab-pane fade show active"
          id="home-tab-pane"
          role="tabpanel"
          aria-labelledby="home-tab"
          tabindex="0"
        >
          <table class="table table-striped w-auto">
            <tbody>
              <% Object.keys(user).forEach(function(prop) { %>
              <tr>
                <td><%- prop %></td>
                <td><%- user[prop] %></td>
              </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
        <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
          <% if(user?.attributes) { %>
          <table class="table table-striped w-auto">
            <tbody>
              <% Object.keys(user.attributes).forEach(function(prop) { %>
              <tr>
                <td><%- prop %></td>
                <td><%- user.attributes[prop] %></td>
              </tr>
              <% }); %>
            </tbody>
          </table>
          <% } %>
        </div>
      </div>
      <% } %>
    </main>
  </body>
</html>
