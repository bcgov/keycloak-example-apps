This repository contains client applications that can be used to test an integratin provided by the BC Gov CSS App

## Next-App

An example [Next.js](https://nextjs.org/) application to connect to CSS App client without 3rd party library or wrapper.back end?

- located in [examples/next-app](examples/next-app) directory.

### Creating a Keycloak integration

Before running the app locally, you will need a keycloak integration.

To use a standard keycloak realm goto the (CSS APP)[https://bcgov.github.io/sso-requests] and create an integration.  It is recomended to do so in the development environment with the IDIR Identity Provider.

This project requires `http://localhost:3000/oauth` as a `Redirect URI`. 

### How to run

- Local development environment w/o Docker

1. Go to `examples/next-app`.
1. Copy `.env.example` to `.env.local`,
1. Set environment variables in `.env.local`.
1. Run the development server:

```sh
    yarn install
    yarn dev
```

- Docker based local development environment

1. Go to `examples/next-app`
1. Copy `.env.example` to `.env`,
1. Set environment variables in `.env`.
1. Build the `docker image`: 

```sh
    docker build -t next-app-example .
```
1. Run the `docker-compose` file:

```sh
    docker-compose up
```

## Environment set up

The environment varibles are copied and pasted in from the installation JSON generated by the CSS app.  The specific json fields to be copied over are described in the `.env.example` file.

More reading on the endpoints used by sso-keycloak can be found in the (wiki)[https://github.com/bcgov/sso-keycloak/wiki/test-endpoints].

# Known issues
1. the codebase should not have any hard coded URLs ie fix cognito.js

